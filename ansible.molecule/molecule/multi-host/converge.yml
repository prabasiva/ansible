---
- name: Converge - Deploy common infrastructure
  hosts: all
  become: true
  gather_facts: true
  roles:
    - role: common
    - role: templates

- name: Converge - Deploy HAProxy servers
  hosts: haproxy_servers
  become: true
  gather_facts: true
  roles:
    - role: haproxy

- name: Converge - Deploy Envoy Proxy servers
  hosts: envoy_servers
  become: true
  gather_facts: true
  roles:
    - role: envoyproxy

- name: Converge - Deploy logging infrastructure
  hosts: logging
  become: true
  gather_facts: true
  roles:
    - role: logging
